Коллеги, мы наконец подошли к долгожданной главе о визуализации! В этой главе мы разберем, как быстро вычленить действительно нужную информацию из общего потока. Руководителям нельзя теряться в сложных задачах! Давайте вместе легко и просто освоим статистику задач и отображение информации.

### 9.1 Фокусируемся на главном

Наша цель — быстро получить общую картину по задачам команды, выделив те, за которые мы отвечаем или которые нас интересуют, не перегружая себя лишними данными.

![](https://static-docs.nocobase.com/20241208170708.png)

Давайте начнем с создания [диаграммы](https://docs.nocobase.com/handbook/data-visualization/user/chart-block) со статистикой задач команды.

#### 9.1.1 Создаем [Блок с диаграммой](https://docs.nocobase.com/handbook/data-visualization/user/chart-block)

На новой странице:

1.  **Создайте новый блок данных для диаграммы.** (Внутри этого основного блока можно построить несколько диаграмм.)
2.  **Выберите целевую таблицу:** Таблица задач. Затем перейдите к настройке диаграммы.

![Пример шагов](https://static-docs.nocobase.com/Solution/202411161926301731756390.png)
![Пример настройки](https://static-docs.nocobase.com/Solution/202411161928201731756500.png)

#### 9.1.2 Настраиваем статистику по статусам задач

Что делать, если мы хотим посчитать количество задач в разных состояниях? Сначала нужно обработать данные:

*   **Метрики:** Выберите уникальное поле, например, поле ID, для подсчета.
*   **Измерения:** Группируйте данные по **статусу**.

Далее, Конфигурация диаграммы:

1.  Выберите [линейную](https://docs-cn.nocobase.com/handbook/data-visualization-echarts/bar) или [столбчатую диаграмму](https://docs.nocobase.com/handbook/data-visualization-echarts/column).
2.  Установите **поле X** как "Статус", а **поле Y** как "ID".
    *(Подсказка: Не забудьте выбрать "Статус" в полях измерений для лучшего визуального различия.)*

![](https://static-docs.nocobase.com/20241208172705.png)

#### 9.1.3 Многомерная статистика: Задачи на человека

Хотите посмотреть количество задач на каждого сотрудника и их статусы? Используйте два измерения, добавив измерение "Исполнитель/Имя".

1.  Нажмите "Выполнить запрос" в левом верхнем углу.

![](https://static-docs.nocobase.com/20241208172811.png)

2.  Если результат не соответствует ожиданиям, выберите **"isGroup"**, чтобы отобразить сравнительную разбивку задач по исполнителям.

![](https://static-docs.nocobase.com/20241208172901.png)

3.  В то же время, если вы хотите отобразить общее количество в виде стека, вы можете выбрать “isStack”. Таким образом, мы увидим процент задач для каждого человека + общий статус задач!

![](https://static-docs.nocobase.com/20241208172933.png)

### 9.2 Фильтрация данных и динамическое отображение

#### 9.2.1 Настраиваем фильтры данных

Конечно, мы можем дополнительно убрать данные по статусам "Отменено" и "В архиве", просто уберите эти два варианта в условиях фильтра слева. Я уверен, что вы хорошо знакомы с этими условиями!

![](https://static-docs.nocobase.com/20241208173025.png)

После фильтрации нажмите "Подтвердить", выйдите из конфигурации, и ваша первая диаграмма готова!

#### 9.2.2 [Дублирование диаграмм](https://docs.nocobase.com/handbook/data-visualization/user/chart-block#configure-block-operations)

Нужны диаграммы и с **"isGroup"**, и с **"isStack"**, не начиная с нуля? Просто дублируйте вашу диаграмму:

*   Нажмите на значок копирования в правом верхнем углу вашего первого блока с диаграммой.
*   Прокрутите колесико вниз, вторая диаграмма появится ниже, перетащите ее вправо, уберите настройку “isStack” и измените на “isGroup”.

![](https://static-docs.nocobase.com/Solution/202411161947481731757668.png)

#### 9.2.3 Динамическая [фильтрация](https://docs.nocobase.com/handbook/data-visualization/user/filter)

Для интерактивной [фильтрации](https://docs.nocobase.com/handbook/data-visualization/user/filter) данных задач:

Конечно! Мы открываем "Фильтр" под блоком данных диаграммы, и над ним появляется панель фильтров. Мы показываем нужные поля и задаем условия фильтрации для этих полей. (Например, измените поле даты на "между")

![Пример фильтра](https://static-docs.nocobase.com/Solution/202411161948261731757706.png)

![](https://static-docs.nocobase.com/Solution/202411161951261731757886.png)

![](https://static-docs.nocobase.com/Solution/202411161952281731757948.png)

#### 9.2.4 Создание пользовательских полей для фильтрации

Что делать, если в особых случаях мы хотим включить данные "Отменено" и "В архиве", поддерживать динамическую фильтрацию и устанавливать фильтры по умолчанию?

Давайте создадим [настраиваемое поле фильтра](https://docs.nocobase.com/handbook/data-visualization/user/filter#custom-fields)!

> Вы можете легко настраивать фильтры, выбирая поля из связанных таблиц данных или создавая собственные поля. (Доступно только внутри блока диаграммы)
>
> Доступные опции включают редактирование заголовков полей, описаний, операторов и установку значений по умолчанию (например, текущий пользователь или дата), что делает фильтры более подходящими для ваших нужд.

1.  Заполните заголовок поля, например, "Статус".
2.  Оставьте поле "Источник" пустым.
3.  Выберите "Флажки" для компонента.
4.  Заполните варианты в соответствии со значениями атрибута "Статус" при создании базы данных (обратите внимание, что порядок атрибутов здесь: "Метка варианта" - "Значение варианта").

![](https://static-docs.nocobase.com/Solution/202411161958151731758295.png)

После успешного создания нажмите "Установить значение по умолчанию" и выберите нужные нам опции.

![](https://static-docs.nocobase.com/Solution/202411162000141731758414.png)

![202411162000481731758448.png](https://static-docs.nocobase.com/Solution/202411162000481731758448.png)

После установки значения по умолчанию вернитесь к конфигурации диаграммы, измените условие фильтра на "Статус - является любым из - Текущие фильтры / статус", а затем подтвердите! (Это нужно изменить в обеих диаграммах.)

![](https://static-docs.nocobase.com/Solution/202411162001431731758503.png)

Готово, давайте протестируем фильтр, данные отображаются идеально.

![202411162003151731758595.png](https://static-docs.nocobase.com/Solution/202411162003151731758595.png)

### 9.3 Динамические ссылки и фильтрация задач

Мощная функция: клик на элементе статистики для перехода к отфильтрованным задачам. Давайте сделаем это.

#### 9.3.1 Используем пример "Не начато", создаем [Статистический виджет](https://docs.nocobase.com/handbook/data-visualization/antd/statistic)

1.  Установите Метрику как **ID - Количество**.
2.  Добавьте фильтр: Статус = "Не начато"
3.  Установите название контейнера "Не начато", Тип диаграммы — "Статистика", а название диаграммы оставьте пустым.

![](https://static-docs.nocobase.com/Solution/202411162011451731759105.png)

Статистика по не начатым задачам успешно отобразилась. Давайте сделаем пять копий по разным статусам и перетащим их наверх.

![](https://static-docs.nocobase.com/Solution/202411162017471731759467.png)

#### 9.3.2 Настраиваем фильтрацию по ссылке

1.  Вернитесь на страницу, содержащую блок таблицы управления задачами, и посмотрите на формат ссылки в адресной строке браузера (обычно что-то вроде `http://xxxxxxxxx/admin/0z9e0um1vcn`).
    ![](https://static-docs.nocobase.com/Solution/202411162046301731761190.png)

    Предположим, что `xxxxxxxxx` представляет ваш домен, а `/admin/0z9e0um1vcn` — это путь. (Нам нужно найти последний `/admin`.)
2.  Скопируйте часть ссылки:

    *   Нам нужно выполнить переход по ссылке. Для этого сначала извлечем определенную часть ссылки.
    *   Скопируйте текст после `admin/` (не включая `admin/`) до конца ссылки. Например, в этом случае часть для копирования: `0z9e0um1vcn`.
        ![](https://static-docs.nocobase.com/Solution/202411162048571731761337.png)

Наведите курсор на "Не начато", и вы заметите, что курсор меняется на значок руки. Нажмите на него для успешного перехода.

![](https://static-docs.nocobase.com/241207gif_click_filter.gif)

3.  Настройте ссылку для диаграммы: Теперь давайте добавим параметр фильтра к ссылке. Помните идентификатор статуса задачи в базе данных? Нам нужно добавить этот параметр в конец ссылки для дальнейшей фильтрации задач.
    *   Добавьте `?task_status=Not started` в конец ссылки. Ваша ссылка будет выглядеть так: `0z9e0um1vcn?task_status=Not started`.
        ![](https://static-docs.nocobase.com/Solution/202411162106351731762395.png)

> **Понимание параметров URL:** При добавлении параметров к URL следует соблюдать правила форматирования:
>
> *   **Вопросительный знак (?):** Обозначает начало параметров.
> *   **Имя и значение параметра:** Форматируются как `имя_параметра=значение_параметра`.
> *   **Несколько параметров:** Используйте символ `&` для их соединения. Например:
>     `http://xxxxxxxxx/admin/hliu6s5tp9x?status=todo&user=123`.
>     В этом примере `user` — это другое имя параметра, а `123` — его соответствующее значение.

4.  Вернитесь на страницу, нажмите для перехода, и вы увидите, что нужные параметры теперь есть в URL. (Было `http://xxxxxxxxx/admin/0z9e0um1vcn`, стало с параметром)

![](https://static-docs.nocobase.com/Pasted%20image%2020241207124358.png)

#### 9.3.3 [Связывание условий фильтрации URL](https://docs.nocobase.com/handbook/ui/variables#url-search-params)

Почему таблица еще не изменилась? Не волнуйтесь, давайте вместе выполним последний шаг!

*   Вернитесь к конфигурации блока таблицы и нажмите "Задать диапазон данных".
*   Выберите "Статус" равный "Параметры поиска URL / status".

Нажмите "Подтвердить" — фильтрация прошла успешно!

![f8c9b2d7f64cf1da4daaa80497235f92.png](https://static-docs.nocobase.com/f8c9b2d7f64cf1da4daaa80497235f92.png)
![](https://static-docs.nocobase.com/Pasted%20image%2020241207124401.png)

![](https://static-docs.nocobase.com/20241207124814.png)

![](https://static-docs.nocobase.com/20241207124914.png)

### 9.4 [Визуализация данных](https://docs.nocobase.com/handbook/data-visualization): Потрясающие диаграммы

> **Визуализация данных: [ECharts](https://docs.nocobase.com/handbook/data-visualization-echarts) (Коммерческий плагин)**
> ECharts предлагает более продвинутые и настраиваемые параметры конфигурации, такие как "[Линейчатая диаграмма](https://docs.nocobase.com/handbook/data-visualization-echarts/line) (Многомерная)", "[Лепестковая диаграмма](https://docs.nocobase.com/handbook/data-visualization-echarts/radar)", "[Облако слов](https://docs.nocobase.com/handbook/data-visualization-echarts/wordcloud)" и многое другое.

Если вы хотите получить доступ к большему количеству опций конфигурации диаграмм, вы можете включить "Визуализация данных: ECharts"!

#### 9.4.1 Быстрая настройка потрясающей [Лепестковой диаграммы](https://docs.nocobase.com/handbook/data-visualization-echarts/radar)

![](https://static-docs.nocobase.com/Solution/202411162116541731763014.png)

Если вы заметили наложение данных, не забудьте настроить размер или радиус, чтобы вся информация отображалась четко!

![](https://static-docs.nocobase.com/Solution/202411162119541731763194.png)

![202411162121201731763280.png](https://static-docs.nocobase.com/Solution/202411162121201731763280.png)

После настройки просто перетащите и отрегулируйте стиль отображения, чтобы завершить работу!

![](https://static-docs.nocobase.com/Solution/202411162124151731763455.png)

#### 9.4.2 Другие типы диаграмм

Вот еще несколько диаграмм для изучения.

##### [Облако слов](https://docs.nocobase.com/handbook/data-visualization-echarts/wordcloud)

![](https://static-docs.nocobase.com/20241207125043.png)

##### [Воронка](https://docs.nocobase.com/handbook/data-visualization-echarts/funnel)

![](https://static-docs.nocobase.com/Solution/202411162130021731763802.png)

##### [Несколько показателей (Двухосевые, Линейная Echarts)](https://docs.nocobase.com/handbook/data-visualization/antd-charts/dual-axes)

Для двухосевых диаграмм вы можете добавить больше показателей.

![](https://static-docs.nocobase.com/Solution/202411162133541731764034.png)

##### [Дивергентная линейчатая диаграмма](https://docs-cn.nocobase.com/handbook/data-visualization-echarts/diverging-bar)

![](https://static-docs.nocobase.com/Solution/202411162136401731764200.png)

### 9.5 Мини-задача

1.  Настройте URL-параметры для оставшихся статусов: "В работе", "Ожидает проверки", "Завершено", "Отменено" и "В архиве".
2.  Настройте поле "Исполнитель" с множественным выбором, подобно полю "Статус", со значением по умолчанию в виде имени текущего пользователя.

Ждем вас в [следующей главе](https://www.nocobase.com/en/tutorials/project-tutorial-task-dashboard-part-2)!

---

Продолжайте исследовать и погружаться в безграничные возможности! Если у вас возникнут какие-либо проблемы на пути, не забудьте заглянуть в [Документацию NocoBase](https://docs.nocobase.com/) или присоединиться к [Сообществу NocoBase](https://forum.nocobase.com/) для обсуждения и поддержки.