# NocoBase AI员工快速启动指南

## 一、理解NocoBase AI员工架构

### 双层设计理念

NocoBase的AI员工采用**背景定义 + 任务特化**的双层架构：

#### 1. 背景定义层（通用能力）

- **定义内容**：AI员工的基础人格、性格特征、核心能力
- **特点**：稳定不变，像员工的"简历"和基本素质
- **作用**：确保AI始终保持一致的角色和行为模式

#### 2. 任务特化层（业务工具）

- **定义内容**：针对特定场景的任务指令和专用工具
- **特点**：灵活配置，根据业务需要动态调整
- **作用**：为具体任务提供专门的能力增强

### 为什么采用双层架构？


| 优势       | 说明                 | 实际效果               |
| ---------- | -------------------- | ---------------------- |
| **稳定性** | 核心定义不受任务影响 | AI员工"性格"始终如一   |
| **灵活性** | 不同任务配不同工具   | 一个员工可胜任多种场景 |
| **可维护** | 背景和任务独立更新   | 升级工具不影响基础定义 |
| **复用性** | 一个背景支持多个任务 | 减少重复定义工作       |

### 实际案例：Viz 的 CRM 场景适配

1. **初始状态**：Viz是通用数据分析师，会写SQL和生成图表
2. **业务需求**：频繁分析CRM数据（线索、商机、客户）
3. **解决方案**：创建CRM分析任务，工作流的 Overall Analytics 工具，以及相关业务表
4. **最终效果**：Viz核心定义不变，但CRM分析效率和准确率都提升了。

## 二、AI员工全景图


| AI员工     | 职能定位   | 核心场景                       | 适用情况               |
| ---------- | ---------- | ------------------------------ | ---------------------- |
| **Viz**    | 数据分析师 | 经营分析、报表生成、趋势洞察   | 需要从数据中获得洞察   |
| **Orin**   | 数据建模师 | 建表改表、关系设计、索引优化   | 设计或优化数据库结构   |
| **Dex**    | 数据整理员 | 文本提取、表单填充、信息结构化 | 处理杂乱的非结构化信息 |
| **Lexi**   | 翻译专家   | 多语言翻译、本地化、术语管理   | 跨语言沟通和文档处理   |
| **Nathan** | 前端工程师 | 字段联动、组件开发、表单逻辑   | 实现前端交互和业务逻辑 |
| **Cole**   | 知识顾问   | NocoBase配置指导、最佳实践     | 系统配置和使用问题     |
| **Vera**   | 外部研究员 | 竞品分析、行业研究、情报收集   | 需要外部信息和市场洞察 |

## 三、在NocoBase中配置AI员工

> 💡 **前提条件**：需要NocoBase 2.0及以上版本，并已安装AI员工插件

### 步骤1：配置大模型服务

在创建AI员工之前，必须先配置大模型服务。

**进入配置页面**：
![00_QuickStart_cn-2025-09-29-15-40-47](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-15-40-47.png)

**创建大模型服务**：

1. 选择接口类型（如OpenAI、Claude等）
2. 填写API密钥和相关配置
3. 注意：接口类型指的是API规范，兼容相同规范的服务都可使用

![00_QuickStart_cn-2025-09-29-15-45-27](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-15-45-27.png)

**测试连接**：
配置完成后，使用测试功能验证接口是否正常：
![00_QuickStart_cn-2025-09-29-16-18-25](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-16-18-25.png)

### 步骤2：创建AI员工

**基础信息配置**：
在AI员工界面创建新员工，配置以下信息：

- **名称**：AI员工的唯一标识名
- **昵称**：AI员工的称呼
- **启用状态**：是否激活该员工
- **简介**：简短的功能描述
- **主要提示词**：定义AI的核心能力（参考附录1）
- **欢迎语**：初始对话时的打招呼内容

![00_QuickStart_cn-2025-09-29-16-21-09](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-16-21-09.png)

**绑定大模型服务**（必须）：
![00_QuickStart_cn-2025-09-29-16-22-27](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-16-22-27.png)

### 步骤3：配置技能

技能决定了AI员工能执行哪些操作。

**技能类型**：

- **前端**：页面交互相关能力
- **数据模型**：数据库操作能力
- **工作流**：自定义的业务流程工具
- **其他**：扩展功能

**配置建议**：

- 按需开启，不要全选（影响性能和准确性）
- 勾选"Auto usage"让AI自动执行工具
- 工作流需要先在工作流模块中创建

![00_QuickStart_cn-2025-09-29-16-26-06](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-16-26-06.png)

### 步骤4：配置知识库（可选）

知识库为商业插件功能，需要额外配置向量数据库：
![00_QuickStart_cn-2025-09-29-16-32-54](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-16-32-54.png)

### 步骤5：验证配置

配置完成后，右下角会出现新的AI员工图标，点击即可开始对话：
![00_QuickStart_cn-2025-09-29-16-36-54](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-16-36-54.png)

### 步骤6：配置AI任务

AI任务是AI员工在特定场景下的专用能力。可以在两个位置配置：

#### 方式1：页面级任务配置

在页面配置区为AI员工添加专门任务，整个页面内有效。

**任务属性包括**：

- **标题**：任务的显示名称
- **背景**：为AI提供的上下文信息
- **默认消息**：预设的开场对话
- **默认关联区块**：自动关联的数据区块
- **技能**：该任务可用的工具
- **是否自动执行**：打开对话框后自动执行

![00_QuickStart_cn-2025-09-29-16-40-34](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-16-40-34.png)

**多任务支持**：
同一个AI员工可配置多个任务，以选项形式供用户选择：
![00_QuickStart_cn-2025-09-29-16-46-00](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-16-46-00.png)

#### 方式2：区块级任务配置

在具体的数据区块（表格、详情、表单、列表）中添加AI操作按钮。

**添加步骤**：

1. 进入区块的操作配置
2. 选择"添加AI员工"选项

![00_QuickStart_cn-2025-09-29-16-51-06](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-16-51-06.png)

3. 选择要绑定的AI员工

![00_QuickStart_cn-2025-09-29-16-52-26](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-16-52-26.png)

**特点**：

- 自动绑定当前区块数据
- 任务配置与页面级相同
- 更适合处理特定数据的场景

![00_QuickStart_cn-2025-09-29-16-53-35](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-16-53-35.png)

### 配置最佳实践

根据实际经验，以下是配置AI员工的关键建议：


| 配置项         | 建议                      | 原因                           |
| -------------- | ------------------------- | ------------------------------ |
| **技能选择**   | 只开启必要技能，3-5个为宜 | 过多技能会降低AI准确性         |
| **Auto usage** | 谨慎开启，先测试后决定    | 避免AI误操作重要数据           |
| **任务粒度**   | 一个任务一个明确目标      | 任务过于宽泛会导致AI迷失       |
| **提示词长度** | 控制在500-1000字符        | 太长影响性能，太短缺少指导     |
| **工作流集成** | 将复杂操作封装为工作流    | 降低AI理解难度，提高执行成功率 |

### 常见问题

**Q：AI员工无法保存？**

A：检查是否已选择大模型服务

**Q：AI回复速度慢？**

A：减少技能数量，优化提示词长度

**Q：AI执行任务不准确？**

A：参考附录1优化提示词，使用更具体的指令

**Q：如何让AI处理特定表单？**

A：如果是页面级的配置，需要手动点选区块。
![00_QuickStart_cn-2025-09-29-17-02-22](https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-17-02-22.png)
如果是区块级任务配置，自动绑定数据上下文

## 四、深入学习

### 各AI员工详细手册

- Viz — 业务洞察与增长顾问
- Orin — 数据建模与结构设计师
- Dex — 数据整理与表单助手
- Lexi — 翻译与本地化专家
- Nathan — 前端代码工程师
- Cole — NocoBase知识顾问
- Vera — 外部研究与情报调查员

### 关键要点回顾

1. **双层架构**：背景定义（稳定）+ 任务特化（灵活）
2. **选对员工**：根据任务类型选择合适的AI员工
3. **写好提示词**：具体、结构化、明确输出
4. **持续优化**：保存成功的提示词模板

---

## 附录1：AI员工提示词编写指南

### 一、AI员工定义技巧

#### 高精度任务公式

每个AI员工都需要明确的"岗位说明书"。我们使用经过验证的**公式**来确保AI准确理解并执行任务。

**公式**: `双重指令` + `模拟确认` + `反复强调` + `强制规则` + `背景信息` + `起名` + `正向激励` + `参考示例` + `反面示例`

**为何有效**：

- **双重指令**：角色/任务分离 → 不混乱
- **模拟确认**：提前确认理解 → 防跑偏
- **反复强调**：重要内容多说几遍 → 加深印象
- **强制规则**：用必须/绝不等词 → 提升准度
- **背景信息**：提供必要背景 → 避免犯错
- **起名**：赋予身份认同 → 建立角色
- **正向激励**：鼓励性语言 → 更好执行
- **正确示例**：必须准确完美
- **反面示例**：实际试错后，补充注意点

#### AI员工定义模板

```yaml
# 1. 起名（name）
你是 [名字]，一位优秀的 [职位]

# 2. 双重指令（bothinst）
## 角色定义
性格特点: [形容词1]、[形容词2]、[形容词3]
核心使命: [一句话说清楚主要职责]
## 任务流程
第一步·理解: [分析用户需求]
第二步·执行: [执行具体操作] 
第三步·验证: [检查结果准确性]
第四步·呈现: [展示最终输出]

# 3. 模拟确认（mock）
在执行前，先复述理解："我理解您需要..."

# 4. 反复强调（reit）
核心要求：[最关键的要求，在开头、中间、结尾都要提]

# 5. 强制规则（right）
必须（MUST）: [不可违背的核心规则]
始终（ALWAYS）: [一贯遵守的原则]
绝不（NEVER）: [明确的禁止事项]

# 6. 背景信息（info）
相关知识: [提供必要的背景知识或常见陷阱]

# 7. 正向激励（pos）
你在这方面特别擅长，[鼓励性描述]

# 参考示例
[提供一个完美的输出示例作为模仿对象]
```

#### 实战示例：数据分析师 Viz

```
// 1. 起名（name）
你是 Viz，一位优秀的数据分析专家

// 2. 双重指令（bothinst）
角色定义：性格洞察力强、表达清晰、视觉导向
核心使命：将复杂数据转化为引人入胜的图表故事

任务流程：
第一步·理解：分析用户的数据需求
第二步·查询：生成安全的SQL查询（强调1：只查真实数据）
第三步·分析：提取关键洞察（强调2：基于真实数据）  
第四步·呈现：创建图表展示（强调3：视觉优先）

// 3. 模拟确认（mock）
执行前先说："我理解您需要分析[具体内容]，将通过[方法]来呈现"

// 4. 反复强调（reit）
记住：数据真实性是核心，宁可说"无数据"也不编造

// 5. 强制规则（right）
必须（MUST）：只用SELECT查询，绝不修改数据
始终（ALWAYS）：默认生成图表，让数据可视化
绝不（NEVER）：编造或推测数据

// 6. 背景信息（info）
注意：ECharts要用纯JSON，不要加注释或函数
常见错误：将多个指标塞进一个图表会导致混乱

// 7. 正向激励（pos）
你特别擅长发现数据背后的故事，总能用最合适的图表让洞察一目了然

// 参考示例
理想输出 = 简短说明（2-3句）+ 独立的ECharts图表

// 调试后补充（仅在测试发现问题后添加）
注意避免：
- 中英文混用 → 保持语言一致
- 数据编造 → 无数据时诚实说明
- 图表过载 → 每个图表专注一个指标
```

#### 当AI不听话时：使用XML标签

如果简单定义效果不好，使用XML标签把内容分区，让AI更容易理解：

```xml
<角色>
你是 Dex，一位数据整理专家
</角色>

<性格>
细心、准确、有条理
</性格>

<任务说明>
你的任务是从杂乱文本中提取结构化信息
必须遵循以下步骤：
1. 识别所有关键字段
2. 提取每个字段的值  
3. 统一格式（日期用YYYY-MM-DD）
4. 输出为JSON格式
</任务说明>

<行为规则>
- 必须：保持100%准确性
- 绝不：猜测缺失的信息
- 始终：标注不确定的数据
</行为规则>

<输出示例>
{
  "姓名": "张三",
  "日期": "2024-01-15",
  "金额": 5000,
  "状态": "已确认"
}
</输出示例>
```

#### 调试优化流程

通过实践不断完善AI员工定义是必经之路。以下是经过验证的优化方法：

**核心原则**：

1. **正面引导优先** - 先告诉AI"应该怎么做"
2. **问题驱动改进** - 发现问题后再补充注意事项
3. **适度约束** - 负面示例只在必要时添加

**优化步骤**：

<img src="https://static-docs.nocobase.com/00_QuickStart_cn-2025-09-29-17-20-21.jpg" alt="00_QuickStart_cn" width="50%">

**问题记录模板**：

```markdown
触发场景：[什么情况下出现]
实际表现：[AI的错误输出]
期望表现：[理想的输出]
解决方案：[如何调整定义]
```

**优化案例**：

```
初始问题：AI将所有数据塞进一个复杂图表
解决方式：
1. 强化正面示例："为每个指标创建独立图表"
2. 背景信息中提醒："多指标混合会导致混乱"
3. 只在反复出现时，才在末尾添加"避免图表过载"
```

#### 定义AI员工的黄金法则

基于大量实践总结的核心经验：

1. **一个AI，一个专长** - 不要让AI承担太多角色
2. **正面示例优先** - 好的示例比约束更有效
3. **规则要明确** - 使用MUST、ALWAYS等强制词汇
4. **流程要清晰** - 步骤化让AI更稳定
5. **测试要充分** - 用5-10个任务验证效果
6. **约束要适度** - 过多"不要"会让AI困惑
7. **持续优化** - 根据实际效果不断调整

**经验提示**：

- ✅ 先写能工作的基础版本，再逐步优化
- ✅ 正面引导为主，负面约束为辅（8:2原则）
- ✅ 记录每次调试发现的问题和解决方案
- ❌ 避免一开始就加入太多限制条件
- ❌ 不要期望一次定义就完美

> 💡 **提示**：每个AI员工的详细定义、专用工具配置、实战案例等，请参考各员工的专属手册。记住：优秀的AI员工定义是迭代出来的。

### 二、任务提示词编写技巧

#### 提示词的基本结构

```markdown
Hi [AI员工名]，  # 1. 指定员工

我需要你帮助[具体任务]。  # 2. 明确需求

**主要任务：**
[任务描述]

**具体要求：**
- 要求1
- 要求2
- 要求3

**输出格式：**
[期望的输出格式]

请[第一步行动]。  # 3. 明确指令
```

#### 为什么这样写有效？

1. **明确角色**：让AI进入特定员工角色
2. **结构清晰**：用标题和列表组织信息
3. **具体要求**：避免模糊，减少误解
4. **输出控制**：确保得到期望的格式

#### 实际示例对比

##### 示例1：数据分析（Viz）

❌ **不好的写法：**

```
分析一下数据
```

✅ **好的写法：**

```txt
Hi Viz，

帮我分析本月的销售数据：
- 对比上月的变化
- 重点看哪个产品卖得最好
- 给我3条改进建议

```

##### 示例2：数据整理（Dex）

❌ **不好的写法：**

```
整理这些信息
```

✅ **好的写法：**

```
Hi Dex，

下面是客户反馈邮件，请帮我提取：
- 客户名称、问题类型、联系方式
帮我填充到表单内，然后整理成表格回复，方便我复制到excel。

[邮件内容...]
```

#### 提示词优化技巧


| 技巧         | 说明             | 示例                     |
| ------------ | ---------------- | ------------------------ |
| **具体化**   | 说清楚要分析什么 | "本月销售数据" vs "数据" |
| **设定范围** | 限定时间或数量   | "最近30天" vs "最近"     |
| **明确输出** | 说明要什么格式   | "表格+3条建议" vs "结果" |
| **分步骤**   | 复杂任务分解     | 用编号列出步骤           |

---

## 附录2：AI 模型能力对照表（2025年9月29日）

各AI模型的详细能力矩阵、适用场景。
参考： https://lmarena.ai/leaderboard


| 模型                                  | 总体  | 高难提示 | 编码  | 数学  | 创意写作 | 指令跟随 | 长查询 | 多轮对话 |
| ------------------------------------- | ----- | -------- | ----- | ----- | -------- | -------- | ------ | -------- |
| claude-opus-4-1-20250805-thinking-16k | **1** | **1**    | **1** | **1** | **1**    | **1**    | **1**  | **1**    |
| gemini-2.5-pro                        | **1** | **2**    | **3** | **1** | **1**    | **1**    | **2**  | **1**    |
| chatgpt-4o-latest-20250326            | **2** | 4        | **3** | 14    | **2**    | 5        | 4      | **1**    |
| claude-opus-4-1-20250805              | **2** | **1**    | **1** | **1** | **1**    | **1**    | **1**  | **1**    |
| gpt-4.5-preview-2025-02-27            | **2** | 5        | 4     | 8     | **1**    | 4        | **3**  | **1**    |
| gpt-5-high                            | **2** | **2**    | **3** | **1** | 7        | 5        | 13     | 7        |
| o3-2025-04-16                         | **2** | 4        | 4     | **1** | 8        | 6        | 14     | 7        |
| qwen3-max-preview                     | **3** | **3**    | **3** | **1** | 7        | 4        | **3**  | **3**    |
| gpt-5-chat                            | 5     | 4        | **3** | 7     | 5        | 5        | 4      | **1**    |
| claude-opus-4-20250514-thinking-16k   | 8     | 4        | **2** | 4     | **2**    | **2**    | **2**  | 7        |
| grok-4-0709                           | 8     | 11       | 16    | **1** | 5        | 6        | 5      | 7        |
| grok-4-fast                           | 8     | 4        | **3** | -     | 7        | 6        | **3**  | **2**    |
| qwen3-235b-a22b-instruct-2507         | 8     | 4        | **3** | **2** | 8        | 6        | 5      | 7        |
| deepseek-v3.1                         | 9     | 9        | 7     | 4     | 7        | 8        | 5      | 12       |
| deepseek-r1-0528                      | 10    | 10       | 4     | 8     | 7        | 16       | 14     | 14       |
| deepseek-v3.1-thinking                | 10    | 5        | 4     | **2** | 5        | 5        | **3**  | 8        |
| kimi-k2-0711-preview                  | 10    | 11       | 7     | 13    | 14       | 27       | 24     | 7        |
| kimi-k2-0905-preview                  | 10    | 5        | 7     | **2** | 8        | 17       | 15     | 8        |
| gpt-4.1-2025-04-14                    | 11    | 11       | 11    | 36    | 7        | 9        | 7      | 7        |
| claude-opus-4-20250514                | 12    | 11       | 7     | 10    | 5        | 6        | 5      | 7        |
| glm-4.5                               | 12    | 11       | 8     | 5     | 16       | 9        | 9      | 14       |
| grok-3-preview-02-24                  | 12    | 11       | 17    | 23    | 7        | 8        | 5      | 12       |
| mistral-medium-2508                   | 14    | 11       | 10    | 8     | 14       | 10       | 13     | 9        |
| gemini-2.5-flash                      | 17    | 23       | 33    | 7     | 7        | 10       | 8      | 17       |
| qwen3-next-80b-a3b-instruct           | 17    | 11       | **3** | **1** | 45       | 24       | 23     | 14       |
| longcat-flash-chat                    | 20    | 11       | 4     | **1** | 24       | 6        | 28     | 17       |
| qwen3-235b-a22b-thinking-2507         | 21    | 11       | 8     | 5     | 9        | 10       | 13     | 17       |
| claude-sonnet-4-20250514-thinking-32k | 22    | 11       | 4     | 8     | 7        | 6        | 5      | 9        |
| o1-2024-12-17                         | 22    | 22       | 27    | 8     | 14       | 9        | 15     | 28       |
| qwen3-235b-a22b-no-thinking           | 22    | 16       | 11    | 11    | 17       | 23       | 18     | 12       |
| deepseek-r1                           | 25    | 20       | 18    | 8     | 16       | 17       | 22     | 11       |
| gpt-5-mini-high                       | 25    | 27       | 33    | 6     | 40       | 27       | 31     | 32       |
| mai-1-preview                         | 25    | 24       | 22    | 8     | 16       | 26       | 23     | 22       |
| o4-mini-2025-04-16                    | 25    | 27       | 26    | 4     | 38       | 31       | 39     | 30       |

---

💡 **提示**：本指南会持续更新。建议收藏并定期查看最新版本，根据实际使用不断完善你的提示词库。
