Чтобы помочь вам быстро и беспрепятственно развернуть собственную дему-версию NocoBase, мы предоставляем два метода. Пожалуйста, выберите наиболее подходящий, исходя из вашей компетенции и технического опыта.

Перед началом убедитесь, что:

- У вас уже есть базовая рабочая среда NocoBase. Для установки основной системы обратитесь к более подробной [официальной документации по установке](https://docs.nocobase.com/welcome/getting-started/installation).
- Вы загрузили файлы нашего CRM Демо:
  - **Файл резервной копии** (прибл. 21.2 МБ): [crm_demo_20250711.nbdata](https://static-docs.nocobase.com/crm_demo_20250711.nbdata) — для Метода 1
  - **SQL-файл** (прибл. 9 МБ в сжатом виде): [crm_demo_20250711_sql.zip](https://static-docs.nocobase.com/crm_demo_20250711_sql.zip) — для Метода 2

**Важное примечание**: Демо-версия построена на базе данных **PostgreSQL**. Пожалуйста, убедитесь, что в вашем окружении используется база данных PostgreSQL.

---

### Метод 1: Восстановление с помощью Менеджера резервных копий (Рекомендуется для пользователей Pro/Enterprise)

Этот метод выполняет восстановление в один клик через встроенный в NocoBase плагин "[Менеджер резервных копий](https://docs.nocobase.com/handbook/backups)" (редакции Pro/Enterprise), с максимально простой операцией. Однако он предъявляет определенные требования к окружению и версии пользователя.

#### Ключевые характеристики

*   **Преимущества**:
    1.  **Удобство операций**: Можно выполнить в интерфейсе UI, способен полностью восстановить все конфигурации, включая плагины.
    2.  **Полное восстановление**: **Может восстановить все системные файлы**, включая файлы для печати шаблонов, загруженные файлы в полях таблиц и т.д., обеспечивая целостность функциональности демо-версии.
*   **Ограничения**:
    1.  **Только для Pro/Enterprise**: "Менеджер резервных копий" — это плагин корпоративного уровня, доступный только пользователям Pro/Enterprise.
    2.  **Строгие требования к окружению**: Требуется, чтобы ваша среда базы данных (версия, настройки регистра символов и т.д.) была полностью совместима со средой создания нашей резервной копии.
    3.  **Зависимости от плагинов**: Если демо-версия содержит коммерческие плагины, которых нет в вашей локальной среде, восстановление завершится неудачей.

#### Шаги выполнения

**Шаг 1: [Настоятельно рекомендуется] Запустите приложение, используя образ `full`**

Чтобы избежать сбоев восстановления из-за отсутствия клиентов базы данных, мы настоятельно рекомендуем использовать версию Docker образа `full`. В него встроены все необходимые вспомогательные программы, не требующие дополнительной настройки. (Примечание: образ собран на основе 1.9.0-alpha.1, обратите внимание на совместимость версий)

Пример команды для получения образа:

```bash
docker pull nocobase/nocobase:1.9.0-alpha.3-full
```

Затем используйте этот образ для запуска вашего сервиса NocoBase.

> **Примечание**: Если вы не используете образ `full`, вам может потребоваться вручную установить клиент базы данных `pg_dump` внутри контейнера, что неудобно и ненадежно.

**Шаг 2: Включите плагин "Менеджер резервных копий"**

1.  Войдите в вашу систему NocoBase.
2.  Перейдите в **`Управление плагинами`**.
3.  Найдите и включите плагин **`Менеджер резервных копий`**.

![20250711014113](https://static-docs.nocobase.com/20250711014113.png)

**Шаг 3: Восстановите из локального файла резервной копии**

1.  После включения плагина обновите страницу.
2.  Перейдите в **`Управление системой`** -> **`Менеджер резервных копий`** в левом меню.
3.  Нажмите кнопку **`Восстановить из локальной резервной копии`** в правом верхнем углу.
    ![20250711014216](https://static-docs.nocobase.com/20250711014216.png)
4.  Перетащите предоставленный нами файл резервной копии демо-версии (обычно в формате `.zip`) в область загрузки.
5.  Нажмите **`Отправить`** и терпеливо дождитесь завершения восстановления системой, это может занять от десяти секунд до нескольких минут.
    ![20250711014250](https://static-docs.nocobase.com/20250711014250.png)

#### ⚠️ Важные примечания

*   **Совместимость базы данных**: Это самый важный момент данного метода. Ваша база данных PostgreSQL: **версия, набор символов, настройки регистра** должны совпадать с исходным файлом резервной копии демо-версии. В частности, имена `schema` должны быть идентичны.
*   **Совпадение коммерческих плагинов**: Убедитесь, что у вас есть и включены все коммерческие плагины, требуемые демо-версией, иначе восстановление будет прервано.

---

### Метод 2: Прямой импорт SQL-файла (Универсальный, больше подходит для Community Edition)

Этот метод восстанавливает данные путем прямого управления базой данных, обходя плагин "Менеджер резервных копий", и, следовательно, не имеет ограничений плагинов Pro/Enterprise.

#### Ключевые характеристики

*   **Преимущества**:
    1.  **Без ограничений версии**: Подходит для всех пользователей NocoBase, включая редакцию Community.
    2.  **Высокая совместимость**: Не зависит от встроенных инструментов `dump`, требует только возможности подключения к базе данных.
    3.  **Высокая отказоустойчивость**: Если демо-версия содержит коммерческие плагины, которых у вас нет (например, диаграммы ECharts), связанные функции не будут активированы, но это не повлияет на нормальное использование других функций, и приложение успешно запустится.
*   **Ограничения**:
    1.  **Требуются навыки работы с БД**: Требует от пользователя базовых навыков работы с базами данных, например, знания, как рабоать с `.sql` файлами.
    2.  **⚠️ Потеря системных файлов**: **Этот метод приведет к потере всех системных файлов**, включая файлы для печати шаблонов, загруженные файлы в полях таблиц и т.д. Это означает:
        - Функции печати шаблонов могут работать некорректно
        - Загруженные изображения, документы и другие файлы будут утеряны
        - Функции, связанные с файловыми полями, могут быть изменены

#### Шаги выполнения

**Шаг 1: Подготовьте чистую базу данных**

Подготовьте совершенно новую, пустую базу данных для импорта данных демо-версии.

**Шаг 2: Импортируйте `.sql` файл в базу данных**

Возьмите предоставленный нами файл базы данных демо-версии (обычно в формате `.sql`) и импортируйте его содержимое в базу данных, подготовленную на предыдущем шаге. Существует несколько способов выполнения, в зависимости от вашего окружения:

*   **Вариант A: Через командную строку сервера (Пример для Docker)**
    Если вы установили NocoBase и базу данных с помощью Docker, вы можете загрузить `.sql` файл на сервер, затем использовать команду `docker exec` для выполнения импорта. Предполагая, что имя вашего контейнера PostgreSQL — `my-nocobase-db`, а имя файла — `crm_demo.sql`:

    ```bash
    # Скопируйте sql-файл в контейнер
    docker cp crm_demo.sql my-nocobase-db:/tmp/
    # Войдите в контейнер для выполнения команды импорта
    docker exec -it my-nocobase-db psql -U your_username -d your_database_name -f /tmp/crm_demo.sql
    ```
*   **Вариант B: Через удаленный клиент базы данных**
    Если ваша база данных предоставляет порт для подключения, вы можете использовать любой графический клиент базы данных (такой как DBeaver, Navicat, pgAdmin и т.д.) для подключения к базе данных, создать новое окно запроса, вставить всё содержимое `.sql` файла и выполнить его.

**Шаг 3: Подключите базу данных и запустите приложение**

Настройте параметры запуска вашего NocoBase (например, переменные окружения `DB_HOST`, `DB_PORT`, `DB_DATABASE`, `DB_USER`, `DB_PASSWORD` и т.д.) так, чтобы они указывали на базу данных, в которую вы только что импортировали данные. Затем запустите сервис NocoBase в обычном режиме.

![img_v3_02o3_eb637bd2-88c3-400b-8421-1ac2057d1aag](https://static-docs.nocobase.com/img_v3_02o3_eb637bd2-88c3-400b-8421-1ac2057d1aag.png)

#### ⚠️ Важные примечания

*   **Права доступа к БД**: Этот метод требует, чтобы у вас была учетная запись и пароль для прямого управления базой данных.
*   **Статус плагинов**: После успешного импорта данные коммерческих плагинов в системе существуют, но если вы не установили и не включили соответствующие плагины локально, связанные функции (такие как диаграммы Echarts, определенные поля и т.д.) не будут отображаться и работать, но это не вызовет сбоев приложения.

---

### Сводка и сравнение

| Характеристика          | Метод 1: Менеджер резервных копий                                                                                         | Метод 2: Прямой импорт SQL                                                                                                                                                             |
| :---------------------- |:--------------------------------------------------------------------------------------------------------------------------| :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Применимые пользователи** | Пользователи **Pro/Enterprise Edition**                                                                                   | **Все пользователи** (включая Community Edition)                                                                                                                                       |
| **Простота операции**   | ⭐⭐⭐⭐⭐ (Очень легко, операции через UI)                                                                                    | ⭐⭐⭐ (Требует базовых знаний о БД)                                                                                                                                                    |
| **Требования к окружению** | **Строгие**: База данных, версия системы и т.д. должны быть полностью совместимы                                          | **Общие**: Требуется только совместимость базы данных                                                                                                                                  |
| **Зависимость от плагинов** | **Сильная зависимость**: Восстановление завершится неудачей, если любой требуемый плагин отсутствует                      | **Зависит от плагинов**. Данные могут быть импортированы независимо, и система имеет базовую функциональность. Однако, если соответствующий плагин отсутствует, связанные функции **не будут работать вообще**. |
| **Системные файлы**     | **✅ Полностью сохранены** (шаблоны печати, загруженные файлы и т.д.)                                                      | **❌ Будут утеряны** (шаблоны печати, загруженные файлы и т.д.)                                                                                                                         |
| **Рекомендуемые сценарии** | Пользователи Pro/Enterprise с контролируемыми, согласованными окружениями, требующие полной демонстрации функциональности | Отсутствие некоторых плагинов, стремление к высокой совместимости и гибкости, пользователи не Pro/Enterprise, приемлема потеря файловых функций                                        |

Мы надеемся, что это руководство поможет вам успешно развернуть демо-версию CRM. Если вы столкнетесь с какими-либо проблемами во время операции, пожалуйста, не стесняйтесь обращаться к нам!